/* SIMPLE MOBILE FIX CSS - Clean Bootstrap 5 Integration */
/* Replacing complex mobile-fix.css with simple, working solution */

/* Basic responsive setup */
html {
    overflow-x: hidden;
}

body {
    overflow-x: hidden;
    padding-top: 0 !important; /* Let main-content handle spacing */
    /* Prevent bounce scrolling on iOS */
    -webkit-overflow-scrolling: touch;
    /* Better text rendering */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    
    /* Prevent horizontal scroll issues */
    width: 100%;
    min-width: 320px; /* Minimum supported width */
}

/* Main content spacing - consistent navbar clearance */
.main-content {
    margin-top: 60px; /* Standard Bootstrap navbar clearance */
    min-height: calc(100vh - 60px);
}

/* Clean navbar styling */
.navbar {
    min-height: 56px;
}

/* Mobile navbar fixes with proper z-index management */
@media (max-width: 991.98px) {
    .navbar-collapse {
        background-color: rgba(13, 110, 253, 0.95);
        border-radius: 0.375rem;
        margin-top: 0.5rem;
        padding: 1rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        z-index: 1050; /* Above Bootstrap modals */
        position: relative;
    }
    
    .navbar-nav .nav-link {
        padding: 0.75rem 1rem;
        margin-bottom: 0.25rem;
        border-radius: 0.25rem;
        min-height: 44px; /* Touch-friendly */
        display: flex;
        align-items: center;
    }
    
    .navbar-nav .nav-link:hover {
        background-color: rgba(255, 255, 255, 0.1);
    }
    
    /* CRITICAL FIX: Mobile dropdown positioning */
    .dropdown-menu {
        position: static !important;
        float: none !important;
        border: none;
        box-shadow: none;
        background-color: rgba(255, 255, 255, 0.1);
        margin: 0.5rem 0;
        transform: none !important; /* Remove transforms that cause overlaps */
        z-index: 1051; /* Above navbar */
        max-height: 300px;
        overflow-y: auto;
        width: 100%;
    }
    
    .dropdown-item {
        min-height: 44px; /* Touch-friendly */
        padding: 0.75rem 1rem;
        display: flex;
        align-items: center;
        white-space: normal; /* Allow text wrapping */
    }
}

/* DISABLE STICKY HEADERS - Prevents column names from covering data rows */
.table thead th,
#main-table thead th,
.table-responsive .table thead th,
.store-comparison-table table thead th,
.table-executive thead th,
table thead th {
    position: static !important; /* Remove sticky to prevent overlap */
    top: auto !important;
    z-index: 1 !important;
    background: linear-gradient(90deg, var(--bte-royal-blue) 0%, #0047AB 100%) !important;
    color: var(--bte-white) !important;
    border-bottom: 2px solid var(--bte-gold) !important;
}

/* Mobile table improvements */
@media (max-width: 767px) {
    .table-responsive {
        position: relative;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
        border-radius: 8px;
    }
    
    .table th, .table td {
        padding: 12px 8px; /* Better spacing on mobile */
        min-width: 80px; /* Prevent cells from being too narrow */
        white-space: nowrap;
    }
    
    /* Add scroll indicator for tables */
    .table-responsive::after {
        content: '← Scroll to see more →';
        position: absolute;
        top: 10px;
        right: 10px;
        background: rgba(0,0,0,0.7);
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.75rem;
        pointer-events: none;
        opacity: 0.8;
        z-index: 10;
    }
}

/* Touch-friendly button sizes and improved interactions */
@media (max-width: 767px) {
    .btn {
        min-height: 44px;
        padding: 0.5rem 1rem;
        font-size: 1rem; /* Readable font size */
        border-radius: 8px; /* Better touch targets */
    }
    
    .btn-sm {
        min-height: 40px; /* Increased for better touch */
        padding: 0.5rem 0.75rem;
        font-size: 0.9rem;
    }
    
    /* Fix dropdown button overlaps */
    .dropdown-toggle {
        position: relative;
        z-index: 1;
    }
    
    .dropdown-menu {
        min-width: 200px;
        max-width: 90vw; /* Prevent overflow on small screens */
    }
    
    /* Improve form controls on mobile */
    .form-control, .form-select {
        min-height: 44px;
        font-size: 16px; /* Prevent zoom on iOS */
        border-radius: 8px;
    }
    
    /* Fix select dropdowns positioning */
    select.form-control, select.form-select {
        background-position: right 12px center;
    }
}

/* Responsive container padding with better mobile spacing */
.container-fluid {
    padding-left: 15px;
    padding-right: 15px;
}

@media (max-width: 575px) {
    .container-fluid {
        padding-left: 12px;
        padding-right: 12px;
    }
    
    /* Improve button groups on mobile */
    .btn-group {
        flex-direction: column;
        width: 100%;
    }
    
    .btn-group .btn {
        margin-bottom: 8px;
        border-radius: 8px !important;
    }
    
    /* Better spacing for cards */
    .card {
        margin-bottom: 15px;
    }
    
    /* Fix input groups on mobile */
    .input-group {
        flex-direction: column;
    }
    
    .input-group .form-control,
    .input-group .btn {
        width: 100%;
        margin-bottom: 8px;
        border-radius: 8px !important;
    }
}

/* Enhanced card styling with mobile optimizations */
.card {
    margin-bottom: 1rem;
    border-radius: 0.5rem;
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    overflow: hidden; /* Prevent content overflow */
}

@media (max-width: 767px) {
    .card {
        border-radius: 8px;
        margin-bottom: 15px;
    }
    
    .card-body {
        padding: 15px;
    }
    
    .card-header {
        padding: 12px 15px;
        border-bottom: 1px solid rgba(0,0,0,0.1);
    }
    
    /* Fix card action buttons on mobile */
    .card .btn-group {
        flex-wrap: wrap;
        gap: 8px;
    }
    
    .card .btn-group .btn {
        margin: 0;
        flex: 1;
        min-width: 100px;
    }
}

/* Responsive typography with better mobile readability */
@media (max-width: 767px) {
    h1, .h1 { 
        font-size: 1.75rem;
        line-height: 1.2;
        margin-bottom: 1rem;
    }
    h2, .h2 { 
        font-size: 1.5rem;
        line-height: 1.3;
        margin-bottom: 0.8rem;
        padding: 10px 12px; /* Adjust padding for mobile */
    }
    h3, .h3 { 
        font-size: 1.25rem;
        line-height: 1.4;
        margin-bottom: 0.6rem;
    }
    h4, .h4 { 
        font-size: 1.125rem;
        line-height: 1.4;
        margin-bottom: 0.5rem;
    }
    
    /* Better text readability on mobile */
    body {
        font-size: 16px; /* Prevent zoom on iOS */
        line-height: 1.5;
    }
    
    p {
        line-height: 1.6;
        margin-bottom: 1rem;
    }
}

/* Enhanced table responsiveness with mobile scroll improvements */
.table-responsive {
    border-radius: 0.5rem;
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    position: relative;
}

/* Mobile-specific table enhancements */
@media (max-width: 767px) {
    .table-responsive {
        border-radius: 8px;
        margin-bottom: 20px;
    }
    
    /* Horizontal scroll with better UX */
    .table-responsive::-webkit-scrollbar {
        height: 8px;
    }
    
    .table-responsive::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 4px;
    }
    
    .table-responsive::-webkit-scrollbar-thumb {
        background: #c1c1c1;
        border-radius: 4px;
    }
    
    .table-responsive::-webkit-scrollbar-thumb:hover {
        background: #a8a8a8;
    }
}

/* Enhanced focus states for accessibility and mobile */
.navbar-toggler:focus,
.nav-link:focus,
.dropdown-item:focus,
.btn:focus,
.form-control:focus,
.form-select:focus {
    outline: 2px solid #0d6efd;
    outline-offset: 2px;
}

/* Improve touch target visual feedback */
@media (hover: none) and (pointer: coarse) {
    .btn:active {
        transform: scale(0.98);
        transition: transform 0.1s ease;
    }
    
    .nav-link:active,
    .dropdown-item:active {
        background-color: rgba(13, 110, 253, 0.2) !important;
    }
}

/* Z-index management for overlapping elements */
.navbar {
    z-index: 1030;
}

.dropdown-menu {
    z-index: 1031;
}

.modal {
    z-index: 1050;
}

.tooltip {
    z-index: 1070;
}

.popover {
    z-index: 1060;
}

/* Executive dashboard mobile fixes */
@media (max-width: 768px) {
    .filter-controls {
        padding: 15px;
        margin-bottom: 20px;
    }
    
    .filter-controls .row {
        margin: 0 -10px;
    }
    
    .filter-controls .col-md-2,
    .filter-controls .col-md-3,
    .filter-controls .col-md-6 {
        padding: 0 10px;
        margin-bottom: 15px;
    }
    
    /* Stack form controls vertically on mobile */
    .filter-controls .form-select,
    .filter-controls .form-control {
        width: 100%;
        margin-bottom: 10px;
    }
    
    /* Prevent dropdown overlaps in executive dashboard */
    .week-selector-container select {
        position: relative;
        z-index: 10;
    }
}

/* Print styles */
@media print {
    .navbar {
        display: none !important;
    }
    
    .main-content {
        margin-top: 0 !important;
    }
    
    .dropdown-menu {
        display: none !important;
    }
    
    .mobile-scroll-indicator,
    .table-responsive::after {
        display: none !important;
    }
}